%PDF-1.3
%âãÏÓ
2 0 obj
<<
/Length 4569
>>
stream
BT
/TT2 1 Tf
12 0 0 12 171.012 669 Tm
0 g
/GS1 gs
0 Tc
0 Tw
[(Intr)18(oducción a Sistemas Operati)10(v)10(os: Pr)18(ocesos)]TJ
/TT4 1 Tf
10 0 0 10 269.53 633 Tm
(Clips xxx)Tj
-2.845 -1.2 TD
[(F)55(r)55( )210(ancisco J Ballester)45(os)]TJ
/TT2 1 Tf
-16.908 -4.8 TD
0.25 Tw
[(1. Err)18(or)18(es)]TJ
/TT6 1 Tf
0 -1.56 TD
0.0221 Tw
[(En el programa que hemos hecho y en los siguientes v)25(amos a hacer muchas llamadas al sistema. Bueno, en)]TJ
0 -1.2 TD
0.0665 Tw
(realidad muchas serán llamadas a la librería de C y otras serán llamadas al sistema. Nos da un poco igual)Tj
T*
0.0573 Tw
[(\(salv)20(o)-307.3(por la sección del manual en que están documentadas, que será la 2 para llamadas al sistema y la 3)]TJ
T*
0 Tw
(para llamadas a la librería de C\). En cualquier caso, son llamadas para utilizar UNIX.)Tj
0 -2.4 TD
0.0104 Tw
(En muchos casos no habrá problema en la llamada que hagamos podrá hacer su trabajo. Pero en otros casos)Tj
0 -1.2 TD
0.0037 Tw
[(no será así. O bien habremos utilizado ar)18(gumentos incorrectos en la llamada, o bien tendremos un problema)]TJ
T*
0.0609 Tw
(de permisos o de otro tipo. Por ejemplo, cada proceso tiene un directorio de trabajo \(como sabes\) y pode-)Tj
T*
0.1038 Tw
(mos utilizar la llamada)Tj
/TT4 1 Tf
9.8009 0 TD
0 Tw
[(c)15(hdir\(2\))]TJ
/TT6 1 Tf
3.6157 0 TD
0.1037 Tw
(para cambiarlo. ¡Pero es posible que intentemos cambiar a un directorio)Tj
-13.4166 -1.2 TD
0 Tw
[(que no e)15(xiste!)]TJ
0 -2.4 TD
0.1213 Tw
[(T)80(odas las llamadas de)25(vuelv)15(en un v)25(alor que, entre otras cosas, nos indicará al menos si han podido o no)]TJ
0 -1.2 TD
0.1442 Tw
[(hacer su trabajo. Es responsabilidad nuestra comprobar dicho v)25(alor y actuar en consecuencia. Habitual-)]TJ
T*
0.1348 Tw
[(mente el v)25(alor de)25(vuelto por una función suele ser un v)25(alor absurdo en el caso de errores. Si la función)]TJ
T*
0.105 Tw
[(de)25(vuelv)15(e)-355(u)0(n)-355(puntero, de)25(v)20(olv)15(erá)]TJ
/TT8 1 Tf
13.1764 0 TD
0 Tw
(NULL)Tj
/TT6 1 Tf
2.4004 0 TD
0.105 Tw
[(,)-355(s)0(i)-355(d)0(e)25(vuelv)15(e)-355(u)0(n)-355(entero positi)25(v)20(o)0(,)-355(d)0(e)25(v)25( )350(olv)15(erá)]TJ
/TT8 1 Tf
17.7799 0 TD
0 Tw
(-1)Tj
/TT6 1 Tf
1.2002 0 TD
0.105 Tw
[(,)-355(etc. La tradición en)]TJ
-34.557 -1.2 TD
0.0343 Tw
[(UNIX es que si el v)25(alor de)25(vuelto es sólo para indicar un error)40(,)-284.4(suele de)25(v)20(olv)15(erse)]TJ
/TT8 1 Tf
32.3547 0 TD
0 Tw
(-1)Tj
/TT6 1 Tf
1.4846 0 TD
0.0344 Tw
(en caso de error y)Tj
/TT8 1 Tf
7.5294 0 TD
0 Tw
(0)Tj
/TT6 1 Tf
0.8845 0 TD
(en)Tj
-42.2532 -1.2 TD
[(caso de éxito. Las páginas de manual de cada función indican qué se de)25(vuelv)15(e)-250(e)0(n)-250(caso de error)55(.)]TJ
0 -2.4 TD
0.0608 Tw
[(Cuando programes en C deberías se)15(guir el mismo con)40(v)15(enio. T)80(odas tus funciones deberían informar al que)]TJ
0 -1.2 TD
0.0334 Tw
[(las llama de si hubo algún error o no \(salv)20(o)-283.4(e)0(n)-283.4(aquellos casos en que nunca pueda producirse un error y en)]TJ
T*
0 Tw
(aquellos casos en que si se produce un error la función termine la ejecución de todo el programa\).)Tj
0 -2.4 TD
(Debes)Tj
/TT2 1 Tf
2.7568 0 TD
0.0078 Tw
[(siempr)18(e)-257.8(compr)18(obar si hubo err)18(or)18(es)]TJ
/TT6 1 Tf
15.3254 0 TD
(en tus programas, en todas las llamadas. Si no lo haces, el pro-)Tj
-18.0822 -1.2 TD
0.0333 Tw
[(grama será un polter)18(gueist. ¿Y qué debería hacerse cuando hubo un error? No hay una respuesta correcta a)]TJ
T*
-0.0001 Tc
0.0699 Tw
[(esta pre)14.9(gunta. Depende de lo que estés programando y de qué función tenga)-319.9(e)-0.1(l)-319.9(error)54.9(.)-319.9(Simplemente piensa)]TJ
T*
0 Tc
0.1798 Tw
[(qué te gustaría que pasara si en una llamada sufres un error)55(.)-429.8(Imagina que el programa lo has tomado)]TJ
T*
0 Tw
(prestado y piensa en lo que crees que debería hacer en cada caso.)Tj
0 -2.4 TD
0.0133 Tw
[(Una v)15(ez has comprobado que una llamada no ha podido hacer su trabajo \(¡eso es lo que signi)]TJ
/TT9 1 Tf
37.4494 0 TD
0 Tw
(Þ)Tj
/TT6 1 Tf
0.5562 0 TD
0.0133 Tw
(ca que sufrió)Tj
-38.0055 -1.2 TD
0.0113 Tw
[(un error!, los errores no son magia\), deberías v)15(er a qué se debió el error)55(.)-261.3(E)0(n)-261.3(UNIX, puedes utilizar la global)]TJ
/TT8 1 Tf
T*
0 Tw
(errno)Tj
/TT6 1 Tf
3.3357 0 TD
0.0851 Tw
[(para v)15(er el código del error \(un entero\) y puedes utilizar)]TJ
/TT4 1 Tf
23.5501 0 TD
0 Tw
[(str)37(err)45(or\(3\))]TJ
/TT6 1 Tf
4.5866 0 TD
0.0851 Tw
(para obtener un string corre-)Tj
-31.4724 -1.2 TD
0 Tw
(spondiente a dicho código.)Tj
0 -2.4 TD
(Por ejemplo, este programa intenta cambiar de directorio:)Tj
ET
endstream
endobj
3 0 obj
<<
/ProcSet [/PDF /Text ]
/Font <<
/TT2 4 0 R
/TT4 5 0 R
/TT6 6 0 R
/TT8 7 0 R
/TT9 8 0 R
>>
/ExtGState <<
/GS1 9 0 R
>>
>>
endobj
12 0 obj
<<
/Length 2127
>>
stream
BT
/TT6 1 Tf
10 0 0 10 282.17 744 Tm
0 g
/GS1 gs
0 Tc
0 Tw
(-2-)Tj
/TT8 1 Tf
8 0 0 8 133 708 Tm
(#include <stdlib.h>)Tj
0 -1.5 TD
(#include <stdio.h>)Tj
T*
(#include <unistd.h>)Tj
T*
(#include <errno.h>)Tj
T*
(#include <string.h>)Tj
0 -3 TD
(int)Tj
0 -1.5 TD
(main\(int argc, char* argv[]\))Tj
T*
({)Tj
2.4 -1.5 TD
(if \(chdir\("foo"\) < 0\){)Tj
2.4 -1.5 TD
(printf\("errno is %d\\n", errno\);)Tj
T*
(printf\("err string is ’%s’\\n", strerror\(errno\)\);)Tj
T*
(exit\(1\);)Tj
-2.4 -1.5 TD
(})Tj
T*
(/* ... do other things ... */)Tj
T*
(exit\(0\);)Tj
-2.4 -1.5 TD
(})Tj
/TT6 1 Tf
10 0 0 10 72 486 Tm
(Suponiendo que el ejecutable es)Tj
/TT8 1 Tf
13.0791 0 TD
(err)Tj
/TT6 1 Tf
2.0503 0 TD
[(y)-250(que no e)15(xiste el directorio)]TJ
/TT8 1 Tf
11.3703 0 TD
(foo)Tj
/TT6 1 Tf
1.8003 0 TD
[(,)-250(cuando lo ejecutamos...)]TJ
/TT8 1 Tf
8 0 0 8 133 468 Tm
(unix$ err)Tj
0 -1.5 TD
(errno is 2)Tj
T*
(err string is ’No such file or directory’)Tj
T*
(unix$)Tj
/TT6 1 Tf
10 0 0 10 72 402 Tm
0.1419 Tw
(En la práctica, deberíamos imprimir el nombre del programa, lo que intentábamos hacer cuando hemos)Tj
0 -1.2 TD
0 Tw
[(sufrido el error)40(,)-250(y)-250(cuál es la causa:)]TJ
/TT8 1 Tf
8 0 0 8 133 372 Tm
(#include <stdlib.h>)Tj
0 -1.5 TD
(#include <stdio.h>)Tj
T*
(#include <unistd.h>)Tj
T*
(#include <errno.h>)Tj
T*
(#include <string.h>)Tj
0 -3 TD
(int)Tj
0 -1.5 TD
(main\(int argc, char* argv[]\))Tj
T*
({)Tj
2.4 -1.5 TD
(if \(chdir\("foo"\) < 0\){)Tj
2.4 -1.5 TD
(fprintf\(stderr, "%s: chdir: foo: %s\\n", argv[0], strerror\(errno\)\);)Tj
T*
(exit\(1\);)Tj
-2.4 -1.5 TD
(})Tj
T*
(/* ... do other things ... */)Tj
T*
(exit\(0\);)Tj
-2.4 -1.5 TD
(})Tj
/TT6 1 Tf
10 0 0 10 72 162 Tm
0.0114 Tw
(Si ahora ejecutamos el programa y este no puede cambiar su directorio, obtenemos un mensaje que ayudará)Tj
0 -1.2 TD
0 Tw
[(a)-250(resolv)15(er el problema:)]TJ
/TT8 1 Tf
8 0 0 8 133 132 Tm
(unix$ err)Tj
0 -1.5 TD
(err: chdir: foo: No such file or directory)Tj
T*
(unix$)Tj
/TT6 1 Tf
10 0 0 10 72 78 Tm
(Esto es tan habitual, que la función)Tj
/TT4 1 Tf
14.2739 0 TD
(warn\(3\))Tj
/TT6 1 Tf
3.4722 0 TD
(hace justo eso. Por ejemplo:)Tj
ET
endstream
endobj
13 0 obj
<<
/ProcSet [/PDF /Text ]
/Font <<
/TT4 5 0 R
/TT6 6 0 R
/TT8 7 0 R
>>
/ExtGState <<
/GS1 9 0 R
>>
>>
endobj
15 0 obj
<<
/Length 2190
>>
stream
BT
/TT6 1 Tf
10 0 0 10 282.17 744 Tm
0 g
/GS1 gs
0 Tc
0 Tw
(-3-)Tj
/TT8 1 Tf
8 0 0 8 133 708 Tm
(#include <stdlib.h>)Tj
0 -1.5 TD
(#include <stdio.h>)Tj
T*
(#include <unistd.h>)Tj
T*
(#include <errno.h>)Tj
T*
(#include <string.h>)Tj
T*
(#include <err.h>)Tj
0 -3 TD
(int)Tj
0 -1.5 TD
(main\(int argc, char* argv[]\))Tj
T*
({)Tj
2.4 -1.5 TD
(if \(chdir\("foo"\) < 0\){)Tj
2.4 -1.5 TD
(warn\("chdir: %s", "foo"\);)Tj
T*
(exit\(1\);)Tj
-2.4 -1.5 TD
(})Tj
T*
(/* ... do other things ... */)Tj
T*
(exit\(0\);)Tj
-2.4 -1.5 TD
(})Tj
/TT6 1 Tf
10 0 0 10 72 498 Tm
[(Y)-250(ahora tenemos...)]TJ
/TT8 1 Tf
8 0 0 8 133 480 Tm
(unix$ err)Tj
T*
(err: chdir: foo: No such file or directory)Tj
T*
(unix$)Tj
/TT6 1 Tf
10 0 0 10 72 426 Tm
0.0256 Tw
[(Como v)15(erás,)]TJ
/TT8 1 Tf
5.3409 0 TD
0 Tw
(warn)Tj
/TT6 1 Tf
2.676 0 TD
0.0256 Tw
(se usa de un modo similar a)Tj
/TT4 1 Tf
11.5381 0 TD
0 Tw
(printf\(3\))Tj
/TT6 1 Tf
3.6643 0 TD
0.0257 Tw
[(e)-275.6(imprime un mensaje de error indicando el nom-)]TJ
-23.2192 -1.2 TD
0.0687 Tw
(bre del programa y el string de error correspondiente a)Tj
/TT8 1 Tf
22.7334 0 TD
0 Tw
(errno)Tj
/TT6 1 Tf
3.0005 0 TD
0.0686 Tw
[(.)-318.7(S)0(i)-318.7(has leído la página de manual)]TJ
/TT4 1 Tf
14.2399 0 TD
0 Tw
(warn\(3\))Tj
/TT6 1 Tf
-39.9738 -1.2 TD
0.0311 Tw
[(\(¡Cosa que deberías haber hecho en este punto!\))-531.1(habrás visto que la función)]TJ
/TT4 1 Tf
31.1714 0 TD
0 Tw
(err\(3\))Tj
/TT6 1 Tf
2.6693 0 TD
0.0311 Tw
(es similar a)Tj
/TT8 1 Tf
4.8976 0 TD
0 Tw
(warn)Tj
/TT6 1 Tf
2.6816 0 TD
(pero)Tj
-41.4199 -1.2 TD
(llama a)Tj
/TT8 1 Tf
3.165 0 TD
(exit)Tj
/TT6 1 Tf
2.6504 0 TD
[(tras imprimir el mensaje con el estatus que le pasas en el primer ar)18(gumento.)]TJ
-5.8154 -2.4 TD
0.0721 Tw
(Un último comentario. No tiene sentido utilizar)Tj
/TT8 1 Tf
19.7225 0 TD
0 Tw
(errno)Tj
/TT6 1 Tf
3.3226 0 TD
0.0721 Tw
[(si no es justo después de una llamada que ha f)10(al-)]TJ
-23.0451 -1.2 TD
0.043 Tw
[(lado \(y ha indicado su error con el v)25(alor de retorno\). Sólo cuando una llamada a UNIX tiene un problema,)]TJ
T*
0 Tw
(dicha llamada actualiza)Tj
/TT8 1 Tf
9.6333 0 TD
(errno)Tj
/TT6 1 Tf
3.2505 0 TD
[(para informar de la causa del error)55(.)]TJ
ET
endstream
endobj
16 0 obj
<<
/ProcSet [/PDF /Text ]
/Font <<
/TT4 5 0 R
/TT6 6 0 R
/TT8 7 0 R
>>
/ExtGState <<
/GS1 9 0 R
>>
>>
endobj
9 0 obj
<<
/Type /ExtGState
/SA false
/SM 0.02
/OP false
/op false
/OPM 1
/BG2 /Default
/UCR2 /Default
/HT /Default
/TR2 /Default
>>
endobj
17 0 obj
<<
/Type /FontDescriptor
/Ascent 750
/CapHeight 676
/Descent -250
/Flags 262178
/FontBBox [-168 -218 1000 935]
/FontName /Times-Bold
/ItalicAngle 0
/StemV 133
/XHeight 461
/StemH 139
>>
endobj
18 0 obj
<<
/Type /FontDescriptor
/Ascent 750
/CapHeight 653
/Descent -250
/Flags 98
/FontBBox [-169 -217 1010 883]
/FontName /Times-Italic
/ItalicAngle -15
/StemV 76
/XHeight 441
/StemH 76
>>
endobj
19 0 obj
<<
/Type /FontDescriptor
/Ascent 750
/CapHeight 662
/Descent -250
/Flags 34
/FontBBox [-168 -218 1000 898]
/FontName /Times-Roman
/ItalicAngle 0
/StemV 84
/XHeight 450
/StemH 84
>>
endobj
20 0 obj
<<
/Type /FontDescriptor
/Ascent 753
/CapHeight 562
/Descent -246
/Flags 35
/FontBBox [-28 -250 628 805]
/FontName /Courier
/ItalicAngle 0
/StemV 51
/XHeight 426
/StemH 51
>>
endobj
21 0 obj
<<
/Type /FontDescriptor
/Ascent 750
/CapHeight 662
/Descent -250
/Flags 34
/FontBBox [-168 -218 1000 898]
/FontName /Times-Roman
/ItalicAngle 0
/StemV 84
/XHeight 450
/StemH 84
>>
endobj
4 0 obj
<<
/Type /Font
/Subtype /TrueType
/FirstChar 32
/LastChar 243
/Widths [250 0 0 0 0 0 0 0 0 0 0 0 0 0 250 0 
0 500 0 0 0 0 0 0 0 0 333 0 0 0 0 0 
0 0 0 0 0 667 0 0 0 389 0 0 0 0 0 778 
611 0 0 556 0 0 0 0 0 0 0 0 0 0 0 0 
0 500 556 444 556 444 0 0 556 278 0 0 0 833 556 500 
556 0 444 389 333 556 500 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 500 ]
/Encoding /WinAnsiEncoding
/BaseFont /Times-Bold
/FontDescriptor 17 0 R
>>
endobj
5 0 obj
<<
/Type /Font
/Subtype /TrueType
/FirstChar 32
/LastChar 120
/Widths [250 0 0 0 0 0 0 0 333 333 0 0 0 0 0 0 
0 0 500 500 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 611 667 0 0 611 0 0 0 444 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 500 0 444 500 444 278 0 500 278 0 0 278 0 500 500 
500 0 389 389 278 0 0 667 444 ]
/Encoding /WinAnsiEncoding
/BaseFont /Times-Italic
/FontDescriptor 18 0 R
>>
endobj
6 0 obj
<<
/Type /Font
/Subtype /TrueType
/FirstChar 32
/LastChar 250
/Widths [250 333 0 0 0 0 0 0 333 333 0 0 250 333 250 0 
0 0 500 500 0 0 0 0 0 0 278 0 0 0 0 444 
0 0 667 667 722 611 0 0 722 333 0 0 611 0 722 722 
556 0 0 556 611 722 0 0 722 722 0 0 0 0 0 0 
0 444 500 444 500 444 333 500 500 278 278 0 278 778 500 500 
500 500 333 389 278 500 500 0 500 500 444 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 333 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 444 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 444 0 0 0 0 0 0 0 444 0 0 0 278 0 0 
0 0 0 500 0 0 0 0 0 0 500 ]
/Encoding /WinAnsiEncoding
/BaseFont /Times-Roman
/FontDescriptor 19 0 R
>>
endobj
7 0 obj
<<
/Type /Font
/Subtype /TrueType
/FirstChar 32
/LastChar 146
/Widths [600 0 600 600 600 600 0 0 600 600 600 0 600 600 600 600 
600 600 600 0 0 0 0 0 0 0 600 600 600 0 600 0 
0 0 0 0 0 0 0 0 0 0 0 0 600 0 600 0 
0 0 0 0 0 600 0 0 0 0 0 600 600 600 0 0 
0 600 600 600 600 600 600 600 600 600 0 0 600 600 600 600 
600 0 600 600 600 600 600 600 600 600 0 600 0 600 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 600 ]
/Encoding /WinAnsiEncoding
/BaseFont /Courier
/FontDescriptor 20 0 R
>>
endobj
8 0 obj
<<
/Type /Font
/Subtype /TrueType
/FirstChar 222
/LastChar 222
/Widths [556 ]
/Encoding /MacRomanEncoding
/BaseFont /Times-Roman
/FontDescriptor 21 0 R
>>
endobj
1 0 obj
<<
/Type /Page
/Parent 10 0 R
/Resources 3 0 R
/Contents 2 0 R
>>
endobj
11 0 obj
<<
/Type /Page
/Parent 10 0 R
/Resources 13 0 R
/Contents 12 0 R
>>
endobj
14 0 obj
<<
/Type /Page
/Parent 10 0 R
/Resources 16 0 R
/Contents 15 0 R
>>
endobj
22 0 obj
<<
/S /D
>>
endobj
23 0 obj
<<
/Nums [0 22 0 R ]
>>
endobj
10 0 obj
<<
/Type /Pages
/Kids [1 0 R 11 0 R 14 0 R]
/Count 3
/MediaBox [0 0 612 792]
>>
endobj
24 0 obj
<<
/CreationDate (D:20160905151710+02'00')
/ModDate (D:20160905151710+02'00')
/Producer (Apple pstopdf)
>>
endobj
25 0 obj
<<
/Type /Catalog
/Pages 10 0 R
/PageLabels 23 0 R
>>
endobj
xref
0 26
0000000000 65535 f 
0000013008 00000 n 
0000000016 00000 n 
0000004637 00000 n 
0000010562 00000 n 
0000011214 00000 n 
0000011612 00000 n 
0000012341 00000 n 
0000012838 00000 n 
0000009435 00000 n 
0000013325 00000 n 
0000013089 00000 n 
0000004776 00000 n 
0000006956 00000 n 
0000013173 00000 n 
0000007074 00000 n 
0000009317 00000 n 
0000009575 00000 n 
0000009777 00000 n 
0000009977 00000 n 
0000010174 00000 n 
0000010365 00000 n 
0000013257 00000 n 
0000013285 00000 n 
0000013421 00000 n 
0000013544 00000 n 
trailer
<<
/Size 26
/Root 25 0 R
/Info 24 0 R
/ID [<97848cd61081bb52c3fefa9b7e470140><97848cd61081bb52c3fefa9b7e470140>]
>>
startxref
13614
%%EOF
