%PDF-1.3
%âãÏÓ
2 0 obj
<<
/Length 4181
>>
stream
BT
/TT2 1 Tf
12 0 0 12 171.342 669 Tm
0 g
/GS1 gs
0 Tc
0 Tw
[(Intr)18(oducción a Sistemas Operati)10(v)10(os: Ficher)18(os)]TJ
/TT4 1 Tf
10 0 0 10 269.53 633 Tm
(Clips xxx)Tj
-2.845 -1.2 TD
[(F)55(r)55( )210(ancisco J Ballester)45(os)]TJ
/TT2 1 Tf
-16.908 -4.8 TD
0.25 Tw
[(1. Cambiando)-250(los )250(metadatos)]TJ
/TT6 1 Tf
0 -1.56 TD
0.0409 Tw
[(Los metadatos cambian muchas v)15(eces simplemente con operar sobre el )]TJ
/TT7 1 Tf
29.1059 0 TD
0 Tw
(Þ)Tj
/TT6 1 Tf
0.5562 0 TD
0.0409 Tw
(chero para cambiar los datos. Por)Tj
-29.6621 -1.2 TD
0.1642 Tw
(ejemplo, el tamaño del )Tj
/TT7 1 Tf
10.0147 0 TD
0 Tw
(Þ)Tj
/TT6 1 Tf
0.5562 0 TD
0.1642 Tw
(chero cambia si lo haces crecer utilizando)Tj
/TT9 1 Tf
18.1133 0 TD
0 Tw
(write)Tj
/TT6 1 Tf
3.0005 0 TD
0.1643 Tw
[(,)-414.3(a)0(l)-414.3(igual que las fechas de)]TJ
-31.6846 -1.2 TD
0 Tw
(acceso y modi)Tj
/TT7 1 Tf
5.7202 0 TD
(Þ)Tj
/TT6 1 Tf
0.5562 0 TD
(cación.)Tj
-6.2764 -2.4 TD
0.0115 Tw
[(Aunque ya podemos v)25(aciar un )]TJ
/TT7 1 Tf
12.4456 0 TD
0 Tw
(Þ)Tj
/TT6 1 Tf
0.5562 0 TD
0.0115 Tw
(chero utilizando)Tj
/TT9 1 Tf
6.7427 0 TD
0 Tw
(open)Tj
/TT6 1 Tf
2.6619 0 TD
0.0115 Tw
[(y)-261.5(hacerlo crecer utilizando)]TJ
/TT9 1 Tf
10.9288 0 TD
0 Tw
(seek)Tj
/TT6 1 Tf
2.6619 0 TD
(y)Tj
/TT9 1 Tf
0.7615 0 TD
(write)Tj
/TT6 1 Tf
3.0005 0 TD
[(,)-261.5(e)0(n)-261.5(oca-)]TJ
-39.759 -1.2 TD
0.0679 Tw
(siones querremos truncar un )Tj
/TT7 1 Tf
11.8238 0 TD
0 Tw
(Þ)Tj
/TT6 1 Tf
0.5562 0 TD
0.0679 Tw
(chero o cambiar su tamaño a un número dado de bytes. Esto puede hacerse)Tj
-12.38 -1.2 TD
0 Tw
(con)Tj
/TT4 1 Tf
1.696 0 TD
(truncate\(2\))Tj
/TT6 1 Tf
4.4985 0 TD
0.0022 Tw
[(,)-252.2(que ajusta el tamaño al número indicado. Si el )]TJ
/TT7 1 Tf
19.2388 0 TD
0 Tw
(Þ)Tj
/TT6 1 Tf
0.5562 0 TD
0.0022 Tw
(chero era más grande, se tiran los bytes del)Tj
/TT7 1 Tf
-25.9895 -1.2 TD
0 Tw
(Þ)Tj
/TT6 1 Tf
0.5562 0 TD
0.0195 Tw
(nal que sobran. Si el )Tj
/TT7 1 Tf
8.4847 0 TD
0 Tw
(Þ)Tj
/TT6 1 Tf
0.5562 0 TD
0.0195 Tw
(chero era más pequeño, se hace crecer con ceros. La llamada puede utilizarse como)Tj
-9.597 -1.2 TD
0 Tw
(en)Tj
/TT9 1 Tf
8 0 0 8 133 443.4 Tm
(if \(truncate\("myfile", 1024\) < 0\) {)Tj
2.4 -1.5 TD
(// truncate ha fallado...)Tj
-2.4 -1.5 TD
(})Tj
/TT6 1 Tf
10 0 0 10 72 401.4 Tm
0.0643 Tw
(que dejaría)Tj
/TT9 1 Tf
4.7927 0 TD
0 Tw
(myfile)Tj
/TT6 1 Tf
3.9149 0 TD
0.0643 Tw
[(con 1024 bytes e)15(xactamente. Como podrás suponer)40(,)-314.3(e)15(xiste)]TJ
/TT4 1 Tf
24.105 0 TD
0 Tw
(ftruncate\(2\))Tj
/TT6 1 Tf
5.0907 0 TD
0.0642 Tw
(que trunca el)Tj
/TT7 1 Tf
-37.9033 -1.2 TD
0 Tw
(Þ)Tj
/TT6 1 Tf
0.5562 0 TD
(chero indicado por un descriptor de )Tj
/TT7 1 Tf
14.4395 0 TD
(Þ)Tj
/TT6 1 Tf
0.5562 0 TD
-0.0002 Tc
0.0002 Tw
(chero en lugar de por un path.)Tj
-15.5518 -2.4 TD
0 Tc
0.0501 Tw
(En realidad,)Tj
/TT9 1 Tf
5.1813 0 TD
0 Tw
(truncate)Tj
/TT6 1 Tf
5.1009 0 TD
0.0501 Tw
(cambia el tamaño en los metadatos y si ello require liberar bloques en disco para)Tj
-10.2821 -1.2 TD
0 Tw
(los datos que ya no se usan, así lo hace.)Tj
0 -2.4 TD
0.0723 Tw
(Los permisos pueden cambiarse con la llamada)Tj
/TT4 1 Tf
19.6384 0 TD
0 Tw
[(c)15(hmod\(2\))]TJ
/TT6 1 Tf
3.817 0 TD
0.0722 Tw
[(,)-322.3(que es la que utiliza el comando)]TJ
/TT4 1 Tf
14.1563 0 TD
0 Tw
[(c)15(hmod\(1\))]TJ
/TT6 1 Tf
4.1392 0 TD
(que)Tj
-41.751 -1.2 TD
0.151 Tw
[(hemos usado anteriormente. Aunque esta v)15(ez sí diremos que también tienes)]TJ
/TT4 1 Tf
32.1372 0 TD
0 Tw
[(fc)15(hmod\(2\))]TJ
/TT6 1 Tf
4.0949 0 TD
0.151 Tw
[(,)-401(e)0(n)-401(e)0(l)-401(futuro no)]TJ
-36.2321 -1.2 TD
0.0807 Tw
(mencionaremos más las funciones que operan con descriptores, ya estás acostumbrado a leer el manual y)Tj
T*
0 Tw
(sabes cómo encontrarlas y usarlas.)Tj
0 -2.4 TD
0.1013 Tw
(Este programa ajusta los permisos de los )Tj
/TT7 1 Tf
17.2335 0 TD
0 Tw
(Þ)Tj
/TT6 1 Tf
0.5562 0 TD
0.1013 Tw
[(cheros que se pasan como ar)18(gumento al v)25(alor indicado por el)]TJ
-17.7897 -1.2 TD
0 Tw
[(primer ar)18(gumento, similar a)]TJ
/TT4 1 Tf
11.3951 0 TD
[(c)15(hmod\(1\))]TJ
/TT6 1 Tf
3.817 0 TD
(.)Tj
/TT9 1 Tf
8 0 0 8 133 239.4 Tm
(#include <stdio.h>)Tj
0 -1.5 TD
(#include <stdlib.h>)Tj
T*
(#include <sys/stat.h>)Tj
T*
(#include <err.h>)Tj
ET
endstream
endobj
3 0 obj
<<
/ProcSet [/PDF /Text ]
/Font <<
/TT2 4 0 R
/TT4 5 0 R
/TT6 6 0 R
/TT7 7 0 R
/TT9 8 0 R
>>
/ExtGState <<
/GS1 9 0 R
>>
>>
endobj
12 0 obj
<<
/Length 2035
>>
stream
BT
/TT6 1 Tf
10 0 0 10 282.17 744 Tm
0 g
/GS1 gs
0 Tc
0 Tw
(-2-)Tj
/TT9 1 Tf
8 0 0 8 133 708 Tm
(int)Tj
0 -1.5 TD
(main\(int argc, char* argv[]\))Tj
T*
({)Tj
2.4 -1.5 TD
(long mode;)Tj
T*
(int i, sts;)Tj
0 -3 TD
(if \(argc < 3\) {)Tj
2.4 -1.5 TD
(fprintf\(stderr, "usage: %s mode file...\\n", argv[0]\);)Tj
T*
(exit\(1\);)Tj
-2.4 -1.5 TD
(})Tj
T*
(mode = strtol\(argv[1], NULL, 8\);)Tj
T*
(sts = 0;)Tj
T*
(for \(i = 2; i < argc; i++\) {)Tj
2.4 -1.5 TD
(if \(chmod\(argv[i], mode\) < 0\) {)Tj
2.4 -1.5 TD
(warn\("chmod: %s", argv[i]\);)Tj
T*
(sts = 1;)Tj
-2.4 -1.5 TD
(})Tj
-2.4 -1.5 TD
(})Tj
T*
(exit\(sts\);)Tj
-2.4 -1.5 TD
(})Tj
/TT6 1 Tf
10 0 0 10 72 450 Tm
[(Podemos utilizarlo como puedes v)15(er:)]TJ
/TT9 1 Tf
8 0 0 8 133 432 Tm
(unix$ chm 664 chm.c)Tj
T*
(unix$ ls -l chm.c)Tj
T*
0.6 Tw
[(-rw-rw-r-- 1)-600(nemo staff 452)-600(Aug )600(21 )600(11:59 )600(chm.c)]TJ
T*
0 Tw
(unix$)Tj
/TT6 1 Tf
10 0 0 10 72 366 Tm
0.0203 Tw
(El propietario y el grupo a que pertenece un )Tj
/TT7 1 Tf
17.981 0 TD
0 Tw
(Þ)Tj
/TT6 1 Tf
0.5562 0 TD
0.0203 Tw
(chero se puede cambiar como se describe en)Tj
/TT4 1 Tf
18.154 0 TD
0 Tw
[(c)15(hown\(2\))]TJ
/TT6 1 Tf
3.7619 0 TD
[(,)-270.2(como)]TJ
-40.453 -1.2 TD
(en:)Tj
/TT9 1 Tf
8 0 0 8 133 336 Tm
(if \(fchown\(fd, newuid, newgid\) < 0\) {)Tj
2.4 -1.5 TD
(// fchown ha fallado)Tj
-2.4 -1.5 TD
(})Tj
/TT6 1 Tf
10 0 0 10 72 294 Tm
-0.0001 Tc
0.0001 Tw
(¿Y si tienes un path en lugar de un descriptor? ¿Cómo lo harás?)Tj
0 -2.4 TD
0 Tc
0.0409 Tw
(Las fechas de acceso y modi)Tj
/TT7 1 Tf
11.6161 0 TD
0 Tw
(Þ)Tj
/TT6 1 Tf
0.5562 0 TD
0.0409 Tw
(cación de un )Tj
/TT7 1 Tf
5.4259 0 TD
0 Tw
(Þ)Tj
/TT6 1 Tf
0.5562 0 TD
0.0409 Tw
(chero pueden cambiarse con)Tj
/TT4 1 Tf
11.7692 0 TD
0 Tw
(utimes\(2\))Tj
/TT6 1 Tf
3.7769 0 TD
0.041 Tw
[(.)-291(Por ejemplo, este pro-)]TJ
-33.7004 -1.2 TD
0 Tw
(gram es similar a)Tj
/TT4 1 Tf
7.1089 0 TD
[(touc)15(h\(1\))]TJ
/TT6 1 Tf
3.3727 0 TD
[(,)-250(aunque nunca crea los )]TJ
/TT7 1 Tf
9.6069 0 TD
(Þ)Tj
/TT6 1 Tf
0.5562 0 TD
[(cheros si no e)15(xisten.)]TJ
ET
endstream
endobj
13 0 obj
<<
/ProcSet [/PDF /Text ]
/Font <<
/TT4 5 0 R
/TT6 6 0 R
/TT7 7 0 R
/TT9 8 0 R
>>
/ExtGState <<
/GS1 9 0 R
>>
>>
endobj
15 0 obj
<<
/Length 1525
>>
stream
BT
/TT6 1 Tf
10 0 0 10 282.17 744 Tm
0 g
/GS1 gs
0 Tc
0 Tw
(-3-)Tj
/TT9 1 Tf
8 0 0 8 133 708 Tm
(#include <stdio.h>)Tj
0 -1.5 TD
(#include <stdlib.h>)Tj
T*
(#include <sys/time.h>)Tj
T*
(#include <err.h>)Tj
0 -3 TD
(int)Tj
0 -1.5 TD
(main\(int argc, char* argv[]\))Tj
T*
({)Tj
2.4 -1.5 TD
(int i, sts;)Tj
T*
(struct timeval tv[2];)Tj
0 -3 TD
(if \(argc < 2\) {)Tj
2.4 -1.5 TD
(fprintf\(stderr, "usage: %s file...\\n", argv[0]\);)Tj
T*
(exit\(1\);)Tj
-2.4 -1.5 TD
(})Tj
T*
(if \(gettimeofday\(&tv[0], NULL\) < 0\) {)Tj
2.4 -1.5 TD
(err\(1, "gettimeofday"\);)Tj
-2.4 -1.5 TD
(})Tj
T*
(tv[1] = tv[0];)Tj
T*
(sts = 0;)Tj
T*
(for \(i = 1; i < argc; i++\) {)Tj
2.4 -1.5 TD
(// could use just NULL instead of tv.)Tj
T*
(if \(utimes\(argv[i], tv\) < 0\) {)Tj
2.4 -1.5 TD
(warn\("utimes: %s", argv[i]\);)Tj
T*
(sts = 1;)Tj
-2.4 -1.5 TD
(})Tj
-2.4 -1.5 TD
(})Tj
T*
(exit\(sts\);)Tj
-2.4 -1.5 TD
(})Tj
/TT6 1 Tf
10 0 0 10 72 342 Tm
0.0692 Tw
(Aquí hemos utilizado)Tj
/TT4 1 Tf
9.0675 0 TD
0 Tw
[(g)10(ettimeofday\(2\))]TJ
/TT6 1 Tf
6.6403 0 TD
0.0692 Tw
(para pedir a UNIX la fecha y hora actual y cambiamos los tiempos)Tj
-15.7077 -1.2 TD
0.0558 Tw
(de los )Tj
/TT7 1 Tf
2.7224 0 TD
0 Tw
(Þ)Tj
/TT6 1 Tf
0.5562 0 TD
0.0558 Tw
[(cheros justo a ese momento. El mismo efecto podría haberse conse)15(guido utilizando ")]TJ
/TT9 1 Tf
34.5814 0 TD
0 Tw
(NULL)Tj
/TT6 1 Tf
2.4004 0 TD
[(")-305.8(como)]TJ
-40.2603 -1.2 TD
[(ar)18(gumento \(que hace que)]TJ
/TT9 1 Tf
10.3106 0 TD
(utimes)Tj
/TT6 1 Tf
3.8506 0 TD
(use la fecha actual\).)Tj
ET
endstream
endobj
16 0 obj
<<
/ProcSet [/PDF /Text ]
/Font <<
/TT4 5 0 R
/TT6 6 0 R
/TT7 7 0 R
/TT9 8 0 R
>>
/ExtGState <<
/GS1 9 0 R
>>
>>
endobj
9 0 obj
<<
/Type /ExtGState
/SA false
/SM 0.02
/OP false
/op false
/OPM 1
/BG2 /Default
/UCR2 /Default
/HT /Default
/TR2 /Default
>>
endobj
17 0 obj
<<
/Type /FontDescriptor
/Ascent 750
/CapHeight 676
/Descent -250
/Flags 262178
/FontBBox [-168 -218 1000 935]
/FontName /Times-Bold
/ItalicAngle 0
/StemV 133
/XHeight 461
/StemH 139
>>
endobj
18 0 obj
<<
/Type /FontDescriptor
/Ascent 750
/CapHeight 653
/Descent -250
/Flags 98
/FontBBox [-169 -217 1010 883]
/FontName /Times-Italic
/ItalicAngle -15
/StemV 76
/XHeight 441
/StemH 76
>>
endobj
19 0 obj
<<
/Type /FontDescriptor
/Ascent 750
/CapHeight 662
/Descent -250
/Flags 34
/FontBBox [-168 -218 1000 898]
/FontName /Times-Roman
/ItalicAngle 0
/StemV 84
/XHeight 450
/StemH 84
>>
endobj
20 0 obj
<<
/Type /FontDescriptor
/Ascent 750
/CapHeight 662
/Descent -250
/Flags 34
/FontBBox [-168 -218 1000 898]
/FontName /Times-Roman
/ItalicAngle 0
/StemV 84
/XHeight 450
/StemH 84
>>
endobj
21 0 obj
<<
/Type /FontDescriptor
/Ascent 753
/CapHeight 562
/Descent -246
/Flags 35
/FontBBox [-28 -250 628 805]
/FontName /Courier
/ItalicAngle 0
/StemV 51
/XHeight 426
/StemH 51
>>
endobj
4 0 obj
<<
/Type /Font
/Subtype /TrueType
/FirstChar 32
/LastChar 243
/Widths [250 0 0 0 0 0 0 0 0 0 0 0 0 0 250 0 
0 500 0 0 0 0 0 0 0 0 333 0 0 0 0 0 
0 0 0 722 0 0 611 0 0 389 0 0 0 0 0 778 
0 0 0 556 0 0 0 0 0 0 0 0 0 0 0 0 
0 500 556 444 556 444 0 0 556 278 0 0 278 833 556 500 
556 0 444 389 333 556 500 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 500 ]
/Encoding /WinAnsiEncoding
/BaseFont /Times-Bold
/FontDescriptor 17 0 R
>>
endobj
5 0 obj
<<
/Type /Font
/Subtype /TrueType
/FirstChar 32
/LastChar 121
/Widths [250 0 0 0 0 0 0 0 333 333 0 0 0 0 0 0 
0 500 500 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 611 667 0 0 611 0 0 0 444 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 500 0 444 500 444 278 500 500 278 0 0 278 722 500 500 
500 0 389 389 278 500 0 667 444 444 ]
/Encoding /WinAnsiEncoding
/BaseFont /Times-Italic
/FontDescriptor 18 0 R
>>
endobj
6 0 obj
<<
/Type /Font
/Subtype /TrueType
/FirstChar 32
/LastChar 250
/Widths [250 0 408 0 0 0 0 0 333 333 0 0 250 333 250 0 
500 500 500 500 500 0 0 0 0 0 278 0 0 0 0 444 
0 722 0 667 0 611 0 0 0 333 0 0 611 0 722 0 
556 0 0 556 0 722 0 0 722 722 0 0 0 0 0 0 
0 444 500 444 500 444 333 500 500 278 278 0 278 778 500 500 
500 500 333 389 278 500 500 0 500 500 444 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 444 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 444 0 0 0 0 0 0 0 444 0 0 0 278 0 0 
0 500 0 500 0 0 0 0 0 0 500 ]
/Encoding /WinAnsiEncoding
/BaseFont /Times-Roman
/FontDescriptor 19 0 R
>>
endobj
7 0 obj
<<
/Type /Font
/Subtype /TrueType
/FirstChar 222
/LastChar 222
/Widths [556 ]
/Encoding /MacRomanEncoding
/BaseFont /Times-Roman
/FontDescriptor 20 0 R
>>
endobj
8 0 obj
<<
/Type /Font
/Subtype /TrueType
/FirstChar 32
/LastChar 125
/Widths [600 0 600 600 600 600 600 0 600 600 600 600 600 600 600 600 
600 600 600 600 600 600 600 0 600 600 600 600 600 600 600 0 
0 600 0 0 0 0 0 0 0 0 0 0 600 0 600 0 
0 0 0 0 0 600 0 0 0 0 0 600 600 600 0 0 
0 600 600 600 600 600 600 600 600 600 600 600 600 600 600 600 
600 0 600 600 600 600 600 600 600 600 0 600 0 600 ]
/Encoding /WinAnsiEncoding
/BaseFont /Courier
/FontDescriptor 21 0 R
>>
endobj
1 0 obj
<<
/Type /Page
/Parent 10 0 R
/Resources 3 0 R
/Contents 2 0 R
>>
endobj
11 0 obj
<<
/Type /Page
/Parent 10 0 R
/Resources 13 0 R
/Contents 12 0 R
>>
endobj
14 0 obj
<<
/Type /Page
/Parent 10 0 R
/Resources 16 0 R
/Contents 15 0 R
>>
endobj
22 0 obj
<<
/S /D
>>
endobj
23 0 obj
<<
/Nums [0 22 0 R ]
>>
endobj
10 0 obj
<<
/Type /Pages
/Kids [1 0 R 11 0 R 14 0 R]
/Count 3
/MediaBox [0 0 612 792]
>>
endobj
24 0 obj
<<
/CreationDate (D:20160905151713+02'00')
/ModDate (D:20160905151713+02'00')
/Producer (Apple pstopdf)
>>
endobj
25 0 obj
<<
/Type /Catalog
/Pages 10 0 R
/PageLabels 23 0 R
>>
endobj
xref
0 26
0000000000 65535 f 
0000011873 00000 n 
0000000016 00000 n 
0000004249 00000 n 
0000009439 00000 n 
0000010093 00000 n 
0000010501 00000 n 
0000011228 00000 n 
0000011398 00000 n 
0000008312 00000 n 
0000012190 00000 n 
0000011954 00000 n 
0000004388 00000 n 
0000006476 00000 n 
0000012038 00000 n 
0000006605 00000 n 
0000008183 00000 n 
0000008452 00000 n 
0000008654 00000 n 
0000008854 00000 n 
0000009051 00000 n 
0000009248 00000 n 
0000012122 00000 n 
0000012150 00000 n 
0000012286 00000 n 
0000012409 00000 n 
trailer
<<
/Size 26
/Root 25 0 R
/Info 24 0 R
/ID [<b9171d027a7658c570c610700b5bc0dc><b9171d027a7658c570c610700b5bc0dc>]
>>
startxref
12479
%%EOF
